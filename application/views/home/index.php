                <div class="row">
                  <div class="col-md-3"></div>
                  <div class="col-md-6">
                      <form class="form form-search" action="http://themepixels.com/demo/webpage/chain/search-results.html">
                        <input type="search" class="form-control" placeholder="Cari">
                      </form>
                  </div>
                  <div class="col-md-3"></div>
                </div>
                <div class="mb30"></div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="panel panel-default">
                            <div class="panel-body padding15">
                                <h5 class="md-title mt0 mb10">Pembangunan Ruang Kelas SDN Coblong 5</h5>
                                <div id="basicFlotLegend" class="flotLegend"></div>
                                <div id="basicflot" class="flotChart"></div>
                            </div><!-- panel-body -->
                            <div class="panel-footer">
                                <div class="row">
                                  <div class="col-md-6">
                                    <div>
                                      <div id="gauge1"></div>
                                    </div><!-- tinystat -->
                                  </div><!-- col-md-7 -->
                                  <div class="col-md-6">
                                    <span class="sublabel">Rencana</span>
                                    <div class="progress progress-xs progress-metro">
                                      <div class="progress-bar progress-bar-primary" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%"></div>
                                    </div><!-- progress -->
                                    
                                    <span class="sublabel">Realisasi</span>
                                    <div class="progress progress-xs progress-metro">
                                      <div class="progress-bar progress-bar-primary" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 32%"></div>
                                    </div><!-- progress -->
                                    
                                    <span class="sublabel">Sisa Waktu</span>
                                    <div class="progress progress-xs progress-metro">
                                      <div class="progress-bar progress-bar-primary" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 82%"></div>
                                    </div><!-- progress -->
                                    
                                  </div><!-- col-md-5 -->
                                </div><!-- row -->
                            </div><!-- panel-footer -->
                        </div><!-- panel -->
                    </div>
                    
                    <div class="col-md-4">
                        <div class="panel panel-default">
                            <div class="panel-body padding15">
                                <h5 class="md-title mt0 mb10">Site Visitors</h5>
                                <div id="basicFlotLegend2" class="flotLegend"></div>
                                <div id="basicflot2" class="flotChart"></div>
                            </div><!-- panel-body -->
                            <div class="panel-footer">
                                <div class="row">
                                  <div class="col-md-6">
                                    <div>
                                      <div id="gauge2"></div>
                                    </div><!-- tinystat -->
                                  </div><!-- col-md-7 -->
                                  <div class="col-md-6">
                                    <span class="sublabel">Rencana</span>
                                    <div class="progress progress-xs progress-metro">
                                      <div class="progress-bar progress-bar-primary" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%"></div>
                                    </div><!-- progress -->
                                    
                                    <span class="sublabel">Realisasi</span>
                                    <div class="progress progress-xs progress-metro">
                                      <div class="progress-bar progress-bar-primary" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 32%"></div>
                                    </div><!-- progress -->
                                    
                                    <span class="sublabel">Sisa Waktu</span>
                                    <div class="progress progress-xs progress-metro">
                                      <div class="progress-bar progress-bar-primary" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 82%"></div>
                                    </div><!-- progress -->
                                    
                                  </div><!-- col-md-5 -->
                                </div><!-- row -->
                            </div><!-- panel-footer -->
                        </div><!-- panel -->
                    </div>
                    
                    <div class="col-md-4">
                        <div class="panel panel-default">
                            <div class="panel-body padding15">
                                <h5 class="md-title mt0 mb10">Site Impressions</h5>
                                <div id="basicFlotLegend3" class="flotLegend"></div>
                                <div id="basicflot3" class="flotChart"></div>
                            </div><!-- panel-body -->
                            <div class="panel-footer">
                                <div class="row">
                                  <div class="col-md-6">
                                    <div>
                                      <div id="gauge3"></div>
                                    </div><!-- tinystat -->
                                  </div><!-- col-md-7 -->
                                  <div class="col-md-6">
                                    <span class="sublabel">Rencana</span>
                                    <div class="progress progress-xs progress-metro">
                                      <div class="progress-bar progress-bar-primary" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%"></div>
                                    </div><!-- progress -->
                                    
                                    <span class="sublabel">Realisasi</span>
                                    <div class="progress progress-xs progress-metro">
                                      <div class="progress-bar progress-bar-primary" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 32%"></div>
                                    </div><!-- progress -->
                                    
                                    <span class="sublabel">Sisa Waktu</span>
                                    <div class="progress progress-xs progress-metro">
                                      <div class="progress-bar progress-bar-primary" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 82%"></div>
                                    </div><!-- progress -->
                                    
                                  </div><!-- col-md-5 -->
                                </div><!-- row -->
                            </div><!-- panel-footer -->
                        </div><!-- panel -->
                    </div>
                </div><!-- row -->
                <div class="row">
                    <div class="col-md-8">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <div class="pull-right">
                                    <a href="#" class="tooltips mr5" data-toggle="modal" title="Settings" id="btn-setting-sorting" data-target=".bs-example-modal"><span class="fa fa-cog"></span></a>
                                </div><!-- panel-btns -->
                                <h3 class="panel-title">Statistik Umum <span id="tahun-berjalan"><?=date('Y');?></span></h3>
                            </div>

                            <div class="panel-body">
                                <div class="row">
                                  <div class="col-md-6">
                                    <h5 class="md-title">Top 5 Kontraktor</h5>
                                    <div class="list-group people-group" id="list-contractors">
                                        
                                    </div><!-- list-group -->
                                  </div>

                                  <div class="col-md-6">
                                    <h5 class="md-title">Top 5 Pengawas</h5>
                                     <div class="list-group people-group" id="list-supervisors">
                                       
                                    </div><!-- list-group -->
                                  </div>
                                </div>
                            </div>
                        </div>
                    </div><!-- col-md-4 -->

                    <div class="col-md-4">
                      <div class="panel panel-success-alt noborder">
                          <div class="panel-heading noborder">
                              <div class="panel-btns">
                                  <a href="#" class="panel-close tooltips" data-toggle="tooltip" title="Close Panel"><i class="fa fa-times"></i></a>
                              </div><!-- panel-btns -->
                              <div class="media-body">
                                  <h5 class="md-title nomargin">Total Nilai Proyek Tahun 2014</h5>
                                  <h1 class="mt5">Rp. 124,35 M</h1>
                              </div><!-- media-body -->
                              <hr>
                              <div class="media-body">
                                  <h5 class="md-title nomargin">Jumlah Proyek 2014</h5>
                                  <h1 class="mt5">24</h1>
                              </div><!-- media-body -->
                              <hr>

                              <div class="clearfix mt20">
                                  <div class="pull-left">
                                      <h5 class="md-title nomargin">Selesai</h5>
                                      <h4 class="nomargin">21</h4>
                                  </div>
                                  <div class="pull-right">
                                      <h5 class="md-title nomargin">Berlangsung</h5>
                                      <h4 class="nomargin">4</h4>
                                  </div>
                              </div>
                              
                          </div><!-- panel-body -->
                      </div><!-- panel -->          
                    </div>
                </div><!-- row -->

<div class="modal fade bs-example-modal" tabindex="-1" role="dialog" id="modal-sorting-setting" >
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button aria-hidden="true" data-dismiss="modal" class="close" type="button">&times;</button>
          <h4 class="modal-title">Atur Pengurutan</h4>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-md-12">
            <form class="form-horizontal" id="form-sorting-setting" action="#">
              <div class="panel panel-default">
                <div class="panel-body">
                  <div class="errorForm"></div>
             
                  <div class="form-group">
                      <label class="col-sm-6 control-label">Urutkan Kontraktor Berdasarkan</label>
                      <div class="col-sm-6">
                        <select id="select-sorting-kontraktor" data-placeholder="Pilih tipe user" class="col-sm-6" name="sort-kontraktor">
                            <option value="0">Nilai Proyek</option>
                            <option value="1">Jumlah Proyek</option>
                        </select>
                      </div>
                  </div><!-- form-group -->

<!--                   <div class="form-group">
                      <label class="col-sm-6 control-label">Urutkan Pengawas Berdasarkan</label>
                      <div class="col-sm-6">
                        <select id="select-sorting-pengawas" data-placeholder="Pilih tipe user"  class="col-sm-6" name="sort-pengawas">
                            <option value="1">Nilai Proyek</option>
                            <option value="1">Jumlah Proyek</option>
                        </select>
                      </div>
                  </div> -->

                  <div class="form-group">
                      <label class="col-sm-6 control-label">Berdasarkan Tahun</label>
                      <div class="col-sm-6">
                        <select id="select-sorting-year" data-placeholder="Pilih tipe user"  class="col-sm-6" name="sort-pengawas">
                            <option value="2014">2014</option>
                            <option value="2015">2015</option>
                        </select>
                      </div>
                  </div><!-- form-group -->

                </div><!-- panel-body -->
                <div class="panel-footer">
                    <button class="btn btn-primary mr5" type="submit" id="btn-submit-setting">Submit</button>
                    <button type="reset" class="btn btn-default">Reset</button>
                </div><!-- panel-footer -->
              </div><!-- panel-default -->
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="<?= base_url();?>public/js/dashboard.js"></script>
<script type="text/javascript">

  $(document).ready(function(){
    drawChart();

    jQuery('#select-sorting-pengawas, #select-sorting-kontraktor, #select-sorting-year').select2({
      minimumResultsForSearch: -1
    });

    loadTopStat(0, 2014);

    $('#btn-submit-setting').click(function(){
      var sortType = $('#select-sorting-kontraktor').val();
      var year = $('#select-sorting-year').val();

      loadTopStat(sortType, year);

      $('#modal-sorting-setting').modal('hide');
      return false;
    });
  });

  function loadTopStat(sortType, year){
    $.ajax({
      url: '<?=base_url();?>home/topstat/' + sortType + '/' + year,
      dataType: 'json'
    })
    .done(function(res){
      if(res.status == 'ok'){
        var contractors = res.contractors;
        var supervisors = res.supervisors;
        var a = '',
            b = '';
        for (var i = 0; i < contractors.length; i++) {
          a += '<a href="#" class="list-group-item">'
              + '<div class="media">'
              +    '<div class="pull-left">'
              +        '<img class="img-circle img-offline" src="<?=base_url();?>public/images/photos/profile.png" alt="...">'
              +    '</div>'
              +    '<div class="media-body">'
              +        '<h4 class="media-heading">'+ contractors[i]['NAME']+'</h4>'
              +        '<small>Rp. <span class="format-money">'+ contractors[i]['JML_NILAI_PROYEK']+'</span> ('+contractors[i]['JML_PROYEK']+' Proyek)</small>'
              +    '</div>'
            + '</div>'
          + '</a>';
        }

        for (var i = 0; i < supervisors.length; i++) {
          b += '<a href="#" class="list-group-item">'
              + '<div class="media">'
              +    '<div class="pull-left">'
              +        '<img class="img-circle img-offline" src="<?=base_url();?>public/images/photos/profile.png" alt="...">'
              +    '</div>'
              +    '<div class="media-body">'
              +        '<h4 class="media-heading">'+ supervisors[i]['NAME']+'</h4>'
              +        '<small>'+supervisors[i]['JML_PROYEK']+' Proyek</small>'
              +    '</div>'
            + '</div>'
          + '</a>';
        } 

        $('#list-contractors').html(a);
        $('#list-supervisors').html(b);
        $('#tahun-berjalan').text(year);
        $(".format-money").priceFormat({
          prefix: '',
          thousandsSeparator: '.',
          centsSeparator: ',',
          centsLimit: 0
        });
      }
    })
    .fail(function(){
    });
  }

  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Label', 'Value'],
      ['Deviasi', 12]
    ]);

    var data2 = google.visualization.arrayToDataTable([
      ['Label', 'Value'],
      ['Deviasi', 5]
    ]);

    var data3 = google.visualization.arrayToDataTable([
      ['Label', 'Value'],
      ['Deviasi', 20]
    ]);

    var options = {
      width: 400, height: 120,
      redFrom: 15, redTo: 100,
      yellowFrom:10, yellowTo: 15,
      minorTicks: 5
    };

    var chart = new google.visualization.Gauge(document.getElementById('gauge1'));
    var chart2 = new google.visualization.Gauge(document.getElementById('gauge2'));
    var chart3 = new google.visualization.Gauge(document.getElementById('gauge3'));

    chart.draw(data, options);
    chart2.draw(data2, options);
    chart3.draw(data3, options);
  }



</script>
