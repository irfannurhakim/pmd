ALTER TABLE DEMON.TBL_DISCUSSION
 DROP PRIMARY KEY CASCADE;

DROP TABLE DEMON.TBL_DISCUSSION CASCADE CONSTRAINTS;

CREATE TABLE DEMON.TBL_DISCUSSION
(
  ID             INTEGER                        NOT NULL,
  ID_ITEM_TASK   INTEGER,
  ID_USER        INTEGER,
  "COMMENT"      LONG,
  CREATED_DATE   TIMESTAMP(6) WITH TIME ZONE,
  MODIFIED_DATE  TIMESTAMP(6) WITH TIME ZONE,
  CREATED_BY     VARCHAR2(100 CHAR),
  MODIFIED_BY    VARCHAR2(100 CHAR)
)
TABLESPACE SYSTEM
PCTUSED    40
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            FREELISTS        1
            FREELIST GROUPS  1
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;


CREATE UNIQUE INDEX DEMON.PK_TBL_DISCUSSION ON DEMON.TBL_DISCUSSION
(ID)
LOGGING
TABLESPACE SYSTEM
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            FREELISTS        1
            FREELIST GROUPS  1
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


CREATE OR REPLACE TRIGGER SYS.TBL_DISCUSSION_BIR 
BEFORE INSERT ON demon.TBL_DISCUSSION
FOR EACH ROW
BEGIN
  SELECT TBL_DISCUSSION_SEQ.NEXTVAL
  INTO   :new.id
  FROM   dual;
END;
/


ALTER TABLE DEMON.TBL_DISCUSSION ADD (
  CONSTRAINT PK_TBL_DISCUSSION
  PRIMARY KEY
  (ID)
  USING INDEX DEMON.PK_TBL_DISCUSSION
  ENABLE VALIDATE);

ALTER TABLE DEMON.TBL_DISCUSSION ADD (
  CONSTRAINT FK_TBL_DISC_REFERENCE_TBL_ITEM 
  FOREIGN KEY (ID_ITEM_TASK) 
  REFERENCES DEMON.TBL_ITEM_TASK (ID)
  ENABLE VALIDATE,
  CONSTRAINT FK_TBL_DISC_REFERENCE_TBL_USER 
  FOREIGN KEY (ID_USER) 
  REFERENCES DEMON.TBL_USER (ID)
  ENABLE VALIDATE);


ALTER TABLE DEMON.TBL_FORGOT_PASSWORD
 DROP PRIMARY KEY CASCADE;

DROP TABLE DEMON.TBL_FORGOT_PASSWORD CASCADE CONSTRAINTS;

CREATE TABLE DEMON.TBL_FORGOT_PASSWORD
(
  ID        INTEGER                             NOT NULL,
  TOKEN     VARCHAR2(32 CHAR),
  EMAIL     VARCHAR2(32 CHAR),
  IS_VALID  INTEGER                             DEFAULT 1
)
TABLESPACE SYSTEM
PCTUSED    40
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            FREELISTS        1
            FREELIST GROUPS  1
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;


CREATE UNIQUE INDEX DEMON.TBL_FORGOT_PASSWORD_PK ON DEMON.TBL_FORGOT_PASSWORD
(ID)
LOGGING
TABLESPACE SYSTEM
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            FREELISTS        1
            FREELIST GROUPS  1
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


CREATE OR REPLACE TRIGGER SYS.TBL_FORGOT_PASSWORD_BIR 
BEFORE INSERT ON demon.TBL_FORGOT_PASSWORD 
FOR EACH ROW
BEGIN
  SELECT TBL_FORGOT_PASSWORD_SEQ.NEXTVAL
  INTO   :new.id
  FROM   dual;
END;
/


ALTER TABLE DEMON.TBL_FORGOT_PASSWORD ADD (
  CONSTRAINT TBL_FORGOT_PASSWORD_PK
  PRIMARY KEY
  (ID)
  USING INDEX DEMON.TBL_FORGOT_PASSWORD_PK
  ENABLE VALIDATE);


ALTER TABLE DEMON.TBL_ITEM_TASK
 DROP PRIMARY KEY CASCADE;

DROP TABLE DEMON.TBL_ITEM_TASK CASCADE CONSTRAINTS;

CREATE TABLE DEMON.TBL_ITEM_TASK
(
  ID                          INTEGER           NOT NULL,
  ID_PARENT                   INTEGER,
  ID_PROJECT                  INTEGER,
  NAME                        VARCHAR2(100 CHAR),
  VALUE                       FLOAT(126),
  VENDOR_IS_DONE              INTEGER           DEFAULT 0,
  SUPERVISOR_IS_DONE          INTEGER           DEFAULT 0,
  VENDOR_PROGRESS_RATING      FLOAT(126)        DEFAULT 0,
  SUPERVISOR_PROGRESS_RATING  FLOAT(126)        DEFAULT 0,
  CREATED_DATE                TIMESTAMP(6) WITH TIME ZONE,
  MODIFIED_DATE               TIMESTAMP(6) WITH TIME ZONE,
  CREATED_BY                  VARCHAR2(100 CHAR),
  MODIFIED_BY                 VARCHAR2(100 CHAR),
  WEEK_NUMBER                 INTEGER,
  USER_IS_DONE                INTEGER           DEFAULT 0,
  VOLUME                      FLOAT(126)        DEFAULT 0,
  SATUAN                      VARCHAR2(100 CHAR)
)
TABLESPACE SYSTEM
PCTUSED    40
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            FREELISTS        1
            FREELIST GROUPS  1
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;


CREATE UNIQUE INDEX DEMON.PK_TBL_ITEM_TASK ON DEMON.TBL_ITEM_TASK
(ID)
LOGGING
TABLESPACE SYSTEM
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            FREELISTS        1
            FREELIST GROUPS  1
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


CREATE OR REPLACE TRIGGER SYS.TBL_ITEM_TASK_BIR 
BEFORE INSERT ON demon.TBL_ITEM_TASK
FOR EACH ROW
BEGIN
  SELECT TBL_ITEM_TASK_SEQ.NEXTVAL
  INTO   :new.id
  FROM   dual;
END;
/


ALTER TABLE DEMON.TBL_ITEM_TASK ADD (
  CONSTRAINT PK_TBL_ITEM_TASK
  PRIMARY KEY
  (ID)
  USING INDEX DEMON.PK_TBL_ITEM_TASK
  ENABLE VALIDATE);

ALTER TABLE DEMON.TBL_ITEM_TASK ADD (
  CONSTRAINT FK_TBL_ITEM_REFERENCE_TBL_PROJ 
  FOREIGN KEY (ID_PROJECT) 
  REFERENCES DEMON.TBL_PROJECT (ID)
  ENABLE VALIDATE);




ALTER TABLE DEMON.TBL_PROJECT
 DROP PRIMARY KEY CASCADE;

DROP TABLE DEMON.TBL_PROJECT CASCADE CONSTRAINTS;

CREATE TABLE DEMON.TBL_PROJECT
(
  ID             INTEGER                        NOT NULL,
  NAME           VARCHAR2(100 CHAR),
  DESCRIPTION    VARCHAR2(1000 CHAR),
  START_DATE     DATE,
  FINISH_DATE    DATE,
  CREATED_DATE   TIMESTAMP(6) WITH TIME ZONE,
  MODIFIED_DATE  TIMESTAMP(6) WITH TIME ZONE,
  CREATED_BY     VARCHAR2(100 CHAR),
  MODIFIED_BY    VARCHAR2(100 CHAR),
  ID_VENDOR      INTEGER,
  BUDGET         FLOAT(126)
)
TABLESPACE SYSTEM
PCTUSED    40
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            FREELISTS        1
            FREELIST GROUPS  1
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;


CREATE UNIQUE INDEX DEMON.PK_TBL_PROJECT ON DEMON.TBL_PROJECT
(ID)
LOGGING
TABLESPACE SYSTEM
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            FREELISTS        1
            FREELIST GROUPS  1
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


ALTER TABLE DEMON.TBL_PROJECT ADD (
  CONSTRAINT PK_TBL_PROJECT
  PRIMARY KEY
  (ID)
  USING INDEX DEMON.PK_TBL_PROJECT
  ENABLE VALIDATE);


ALTER TABLE DEMON.TBL_PROJECT_PLANNING
 DROP PRIMARY KEY CASCADE;

DROP TABLE DEMON.TBL_PROJECT_PLANNING CASCADE CONSTRAINTS;

CREATE TABLE DEMON.TBL_PROJECT_PLANNING
(
  ID                   INTEGER                  NOT NULL,
  ID_PROJECT           INTEGER,
  WEEK_NUMBER          INTEGER,
  PLANNING_PERCENTAGE  FLOAT(126),
  CREATED_DATE         TIMESTAMP(6) WITH LOCAL TIME ZONE,
  MODIFIED_DATE        TIMESTAMP(6) WITH LOCAL TIME ZONE,
  CREATED_BY           VARCHAR2(100 CHAR),
  MODIFIED_BY          VARCHAR2(100 CHAR)
)
TABLESPACE SYSTEM
PCTUSED    40
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            FREELISTS        1
            FREELIST GROUPS  1
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;


CREATE UNIQUE INDEX DEMON.TBL_PROJECT_PLANNING_PK ON DEMON.TBL_PROJECT_PLANNING
(ID)
LOGGING
TABLESPACE SYSTEM
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            FREELISTS        1
            FREELIST GROUPS  1
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


ALTER TABLE DEMON.TBL_PROJECT_PLANNING ADD (
  CONSTRAINT TBL_PROJECT_PLANNING_PK
  PRIMARY KEY
  (ID)
  USING INDEX DEMON.TBL_PROJECT_PLANNING_PK
  ENABLE VALIDATE);


ALTER TABLE DEMON.TBL_SUPERVISOR_PROJECT
 DROP PRIMARY KEY CASCADE;

DROP TABLE DEMON.TBL_SUPERVISOR_PROJECT CASCADE CONSTRAINTS;

CREATE TABLE DEMON.TBL_SUPERVISOR_PROJECT
(
  ID          INTEGER                           NOT NULL,
  ID_PROJECT  INTEGER,
  ID_USER     INTEGER
)
TABLESPACE SYSTEM
PCTUSED    40
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            FREELISTS        1
            FREELIST GROUPS  1
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;


CREATE UNIQUE INDEX DEMON.PK_TBL_SUVERPISOR_PROJECT ON DEMON.TBL_SUPERVISOR_PROJECT
(ID)
LOGGING
TABLESPACE SYSTEM
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            FREELISTS        1
            FREELIST GROUPS  1
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


CREATE OR REPLACE TRIGGER SYS.TBL_SUPERVISOR_PROJECT_BIR 
BEFORE INSERT ON demon.TBL_SUPERVISOR_PROJECT
FOR EACH ROW
BEGIN
  SELECT TBL_SUPERVISOR_PROJECT_SEQ.NEXTVAL
  INTO   :new.id
  FROM   dual;
END;
/


ALTER TABLE DEMON.TBL_SUPERVISOR_PROJECT ADD (
  CONSTRAINT PK_TBL_SUVERPISOR_PROJECT
  PRIMARY KEY
  (ID)
  USING INDEX DEMON.PK_TBL_SUVERPISOR_PROJECT
  ENABLE VALIDATE);

ALTER TABLE DEMON.TBL_SUPERVISOR_PROJECT ADD (
  CONSTRAINT FK_TBL_SUVE_REFERENCE_TBL_PROJ 
  FOREIGN KEY (ID_PROJECT) 
  REFERENCES DEMON.TBL_PROJECT (ID)
  ENABLE VALIDATE,
  CONSTRAINT FK_TBL_SUVE_REFERENCE_TBL_USER 
  FOREIGN KEY (ID_USER) 
  REFERENCES DEMON.TBL_USER (ID)
  ENABLE VALIDATE);


ALTER TABLE DEMON.TBL_USER
 DROP PRIMARY KEY CASCADE;

DROP TABLE DEMON.TBL_USER CASCADE CONSTRAINTS;

CREATE TABLE DEMON.TBL_USER
(
  ID            INTEGER                         NOT NULL,
  USERNAME      VARCHAR2(100 CHAR)              NOT NULL,
  NAME          VARCHAR2(100 CHAR),
  PASSWORD      VARCHAR2(500 CHAR)              NOT NULL,
  ID_USER_TYPE  INTEGER                         NOT NULL,
  AFFILIATION   VARCHAR2(100 CHAR),
  EMAIL         VARCHAR2(100 CHAR)
)
TABLESPACE SYSTEM
PCTUSED    40
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            FREELISTS        1
            FREELIST GROUPS  1
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;


CREATE UNIQUE INDEX DEMON.PK_TBL_USER ON DEMON.TBL_USER
(ID)
LOGGING
TABLESPACE SYSTEM
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            FREELISTS        1
            FREELIST GROUPS  1
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


CREATE OR REPLACE TRIGGER SYS.TBL_USER_BIR 
BEFORE INSERT ON demon.TBL_USER
FOR EACH ROW
BEGIN
  SELECT TBL_USER_SEQ.NEXTVAL
  INTO   :new.id
  FROM   dual;
END;
/


ALTER TABLE DEMON.TBL_USER ADD (
  CONSTRAINT PK_TBL_USER
  PRIMARY KEY
  (ID)
  USING INDEX DEMON.PK_TBL_USER
  ENABLE VALIDATE);

ALTER TABLE DEMON.TBL_USER ADD (
  CONSTRAINT FK_TBL_USER_REFERENCE_TBL_USER 
  FOREIGN KEY (ID_USER_TYPE) 
  REFERENCES DEMON.TBL_USER_TYPE (ID)
  ENABLE VALIDATE);


ALTER TABLE DEMON.TBL_USER_TYPE
 DROP PRIMARY KEY CASCADE;

DROP TABLE DEMON.TBL_USER_TYPE CASCADE CONSTRAINTS;

CREATE TABLE DEMON.TBL_USER_TYPE
(
  ID           INTEGER                          NOT NULL,
  NAME         VARCHAR2(100 CHAR),
  DESCRIPTION  VARCHAR2(2000 CHAR)
)
TABLESPACE SYSTEM
PCTUSED    40
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            FREELISTS        1
            FREELIST GROUPS  1
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;


CREATE UNIQUE INDEX DEMON.PK_TBL_USER_TYPE ON DEMON.TBL_USER_TYPE
(ID)
LOGGING
TABLESPACE SYSTEM
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            FREELISTS        1
            FREELIST GROUPS  1
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


CREATE OR REPLACE TRIGGER SYS.TBL_USER_TYPE_SEQ 
BEFORE INSERT ON demon.TBL_USER_TYPE
FOR EACH ROW
BEGIN
  SELECT TBL_USER_TYPE_SEQ.NEXTVAL
  INTO   :new.id
  FROM   dual;
END;
/


ALTER TABLE DEMON.TBL_USER_TYPE ADD (
  CONSTRAINT PK_TBL_USER_TYPE
  PRIMARY KEY
  (ID)
  USING INDEX DEMON.PK_TBL_USER_TYPE
  ENABLE VALIDATE);


ALTER TABLE DEMON.TBL_VENDOR_PROJECT
 DROP PRIMARY KEY CASCADE;

DROP TABLE DEMON.TBL_VENDOR_PROJECT CASCADE CONSTRAINTS;

CREATE TABLE DEMON.TBL_VENDOR_PROJECT
(
  ID          INTEGER                           NOT NULL,
  ID_PROJECT  INTEGER,
  ID_USER     INTEGER
)
TABLESPACE SYSTEM
PCTUSED    40
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            FREELISTS        1
            FREELIST GROUPS  1
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;


CREATE UNIQUE INDEX DEMON.PK_TBL_VENDOR_PROJECT ON DEMON.TBL_VENDOR_PROJECT
(ID)
LOGGING
TABLESPACE SYSTEM
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            FREELISTS        1
            FREELIST GROUPS  1
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


ALTER TABLE DEMON.TBL_VENDOR_PROJECT ADD (
  CONSTRAINT PK_TBL_VENDOR_PROJECT
  PRIMARY KEY
  (ID)
  USING INDEX DEMON.PK_TBL_VENDOR_PROJECT
  ENABLE VALIDATE);

ALTER TABLE DEMON.TBL_VENDOR_PROJECT ADD (
  CONSTRAINT FK_TBL_VEND_REFERENCE_TBL_PROJ 
  FOREIGN KEY (ID_PROJECT) 
  REFERENCES DEMON.TBL_PROJECT (ID)
  ENABLE VALIDATE,
  CONSTRAINT FK_TBL_VEND_REFERENCE_TBL_USER 
  FOREIGN KEY (ID_USER) 
  REFERENCES DEMON.TBL_USER (ID)
  ENABLE VALIDATE);
